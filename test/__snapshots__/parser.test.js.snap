// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`rules Cell Modifiers parses a rule with a variable that begins with the name of a modifier 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "s",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "t",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "a",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "t",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "i",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "o",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "n",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "a",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "r",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "y",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "s",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "t",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "a",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "t",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "i",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "o",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "n",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "a",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "r",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "y",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with a variable that begins with the name of a modifier 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 288,
      "_spriteNameOrLevelChar": "stationaryz",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 287,
          "_color": TransparentColor {
            "__astId": 286,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 287,
      "_color": TransparentColor {
        "__astId": 286,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 297,
      "_innerRule": RuleBracketsToZip {
        "__astId": 295,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 294,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 293,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 292,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 288,
                      "_spriteNameOrLevelChar": "stationaryz",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 287,
                          "_color": TransparentColor {
                            "__astId": 286,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 296,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 292,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 288,
                      "_spriteNameOrLevelChar": "stationaryz",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 287,
                          "_color": TransparentColor {
                            "__astId": 286,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 289,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 288,
                      "_spriteNameOrLevelChar": "stationaryz",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 287,
                          "_color": TransparentColor {
                            "__astId": 286,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 291,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 290,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 289,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 288,
                      "_spriteNameOrLevelChar": "stationaryz",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 287,
                          "_color": TransparentColor {
                            "__astId": 286,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_ACTION",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "ACTION",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 101,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 100,
          "_color": TransparentColor {
            "__astId": 99,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 100,
      "_color": TransparentColor {
        "__astId": 99,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 109,
      "_innerRule": RuleBracketsToZip {
        "__astId": 107,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 106,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 105,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 108,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 102,
                    "_cellModifiers": Set {
                      "ACTION",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 101,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 100,
                          "_color": TransparentColor {
                            "__astId": 99,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 104,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 103,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 102,
                    "_cellModifiers": Set {
                      "ACTION",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 101,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 100,
                          "_color": TransparentColor {
                            "__astId": 99,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 3`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_ARROW_ANY",
                                              "_i0": Object {
                                                "__name": "t_ARROW_UP",
                                                "_i0": "^",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 4`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 112,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 111,
          "_color": TransparentColor {
            "__astId": 110,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 111,
      "_color": TransparentColor {
        "__astId": 110,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 120,
      "_innerRule": RuleBracketsToZip {
        "__astId": 118,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 117,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 116,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 119,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 113,
                    "_cellModifiers": Set {
                      "^",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 112,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 111,
                          "_color": TransparentColor {
                            "__astId": 110,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 115,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 114,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 113,
                    "_cellModifiers": Set {
                      "^",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 112,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 111,
                          "_color": TransparentColor {
                            "__astId": 110,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 5`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_ARROW_ANY",
                                              "_i0": Object {
                                                "__name": "t_ARROW_DOWN",
                                                "_i0": Object {
                                                  "__name": "caseInsensitive",
                                                  "_i0": "V",
                                                },
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 6`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 123,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 122,
          "_color": TransparentColor {
            "__astId": 121,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 122,
      "_color": TransparentColor {
        "__astId": 121,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 131,
      "_innerRule": RuleBracketsToZip {
        "__astId": 129,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 128,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 127,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 130,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 124,
                    "_cellModifiers": Set {
                      "V",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 123,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 122,
                          "_color": TransparentColor {
                            "__astId": 121,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 126,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 125,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 124,
                    "_cellModifiers": Set {
                      "V",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 123,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 122,
                          "_color": TransparentColor {
                            "__astId": 121,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 7`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_ARROW_ANY",
                                              "_i0": Object {
                                                "__name": "t_ARROW_RIGHT",
                                                "_i0": ">",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 8`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 134,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 133,
          "_color": TransparentColor {
            "__astId": 132,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 133,
      "_color": TransparentColor {
        "__astId": 132,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 142,
      "_innerRule": RuleBracketsToZip {
        "__astId": 140,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 139,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 138,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 141,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 135,
                    "_cellModifiers": Set {
                      ">",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 134,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 133,
                          "_color": TransparentColor {
                            "__astId": 132,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 137,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 136,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 135,
                    "_cellModifiers": Set {
                      ">",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 134,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 133,
                          "_color": TransparentColor {
                            "__astId": 132,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 9`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_ARROW_ANY",
                                              "_i0": Object {
                                                "__name": "t_ARROW_LEFT",
                                                "_i0": "<",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 10`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 145,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 144,
          "_color": TransparentColor {
            "__astId": 143,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 144,
      "_color": TransparentColor {
        "__astId": 143,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 153,
      "_innerRule": RuleBracketsToZip {
        "__astId": 151,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 150,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 149,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 152,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 146,
                    "_cellModifiers": Set {
                      "<",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 145,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 144,
                          "_color": TransparentColor {
                            "__astId": 143,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 148,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 147,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 146,
                    "_cellModifiers": Set {
                      "<",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 145,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 144,
                          "_color": TransparentColor {
                            "__astId": 143,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 11`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_LEFT",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "LEFT",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 12`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 156,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 155,
          "_color": TransparentColor {
            "__astId": 154,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 155,
      "_color": TransparentColor {
        "__astId": 154,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 164,
      "_innerRule": RuleBracketsToZip {
        "__astId": 162,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 161,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 160,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 163,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 157,
                    "_cellModifiers": Set {
                      "LEFT",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 156,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 155,
                          "_color": TransparentColor {
                            "__astId": 154,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 159,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 158,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 157,
                    "_cellModifiers": Set {
                      "LEFT",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 156,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 155,
                          "_color": TransparentColor {
                            "__astId": 154,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 13`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_RIGHT",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "RIGHT",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 14`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 167,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 166,
          "_color": TransparentColor {
            "__astId": 165,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 166,
      "_color": TransparentColor {
        "__astId": 165,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 175,
      "_innerRule": RuleBracketsToZip {
        "__astId": 173,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 172,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 171,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 174,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 168,
                    "_cellModifiers": Set {
                      "RIGHT",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 167,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 166,
                          "_color": TransparentColor {
                            "__astId": 165,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 170,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 169,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 168,
                    "_cellModifiers": Set {
                      "RIGHT",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 167,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 166,
                          "_color": TransparentColor {
                            "__astId": 165,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 15`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_UP",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "UP",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 16`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 178,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 177,
          "_color": TransparentColor {
            "__astId": 176,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 177,
      "_color": TransparentColor {
        "__astId": 176,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 186,
      "_innerRule": RuleBracketsToZip {
        "__astId": 184,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 183,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 182,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 185,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 179,
                    "_cellModifiers": Set {
                      "UP",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 178,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 177,
                          "_color": TransparentColor {
                            "__astId": 176,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 181,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 180,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 179,
                    "_cellModifiers": Set {
                      "UP",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 178,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 177,
                          "_color": TransparentColor {
                            "__astId": 176,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 17`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_DOWN",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "DOWN",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 18`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 189,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 188,
          "_color": TransparentColor {
            "__astId": 187,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 188,
      "_color": TransparentColor {
        "__astId": 187,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 197,
      "_innerRule": RuleBracketsToZip {
        "__astId": 195,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 194,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 193,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 196,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 190,
                    "_cellModifiers": Set {
                      "DOWN",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 189,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 188,
                          "_color": TransparentColor {
                            "__astId": 187,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 192,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 191,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 190,
                    "_cellModifiers": Set {
                      "DOWN",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 189,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 188,
                          "_color": TransparentColor {
                            "__astId": 187,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 19`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_STATIONARY",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "STATIONARY",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 20`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 200,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 199,
          "_color": TransparentColor {
            "__astId": 198,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 199,
      "_color": TransparentColor {
        "__astId": 198,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 208,
      "_innerRule": RuleBracketsToZip {
        "__astId": 206,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 205,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 204,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 207,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 201,
                    "_cellModifiers": Set {
                      "STATIONARY",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 200,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 199,
                          "_color": TransparentColor {
                            "__astId": 198,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 203,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 202,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 201,
                    "_cellModifiers": Set {
                      "STATIONARY",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 200,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 199,
                          "_color": TransparentColor {
                            "__astId": 198,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 21`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_MOVING",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "MOVING",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 22`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 211,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 210,
          "_color": TransparentColor {
            "__astId": 209,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 210,
      "_color": TransparentColor {
        "__astId": 209,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 219,
      "_innerRule": RuleBracketsToZip {
        "__astId": 217,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 216,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 215,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 218,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 212,
                    "_cellModifiers": Set {
                      "MOVING",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 211,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 210,
                          "_color": TransparentColor {
                            "__astId": 209,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 214,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 213,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 212,
                    "_cellModifiers": Set {
                      "MOVING",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 211,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 210,
                          "_color": TransparentColor {
                            "__astId": 209,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 23`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_VERTICAL",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "VERTICAL",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 24`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 222,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 221,
          "_color": TransparentColor {
            "__astId": 220,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 221,
      "_color": TransparentColor {
        "__astId": 220,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 230,
      "_innerRule": RuleBracketsToZip {
        "__astId": 228,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 227,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 226,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 229,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 223,
                    "_cellModifiers": Set {
                      "VERTICAL",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 222,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 221,
                          "_color": TransparentColor {
                            "__astId": 220,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 225,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 224,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 223,
                    "_cellModifiers": Set {
                      "VERTICAL",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 222,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 221,
                          "_color": TransparentColor {
                            "__astId": 220,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 25`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_HORIZONTAL",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "HORIZONTAL",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 26`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 233,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 232,
          "_color": TransparentColor {
            "__astId": 231,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 232,
      "_color": TransparentColor {
        "__astId": 231,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 241,
      "_innerRule": RuleBracketsToZip {
        "__astId": 239,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 238,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 237,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 240,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 234,
                    "_cellModifiers": Set {
                      "HORIZONTAL",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 233,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 232,
                          "_color": TransparentColor {
                            "__astId": 231,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 236,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 235,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 234,
                    "_cellModifiers": Set {
                      "HORIZONTAL",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 233,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 232,
                          "_color": TransparentColor {
                            "__astId": 231,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 27`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_PERPENDICULAR",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "PERPENDICULAR",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 28`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 244,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 243,
          "_color": TransparentColor {
            "__astId": 242,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 243,
      "_color": TransparentColor {
        "__astId": 242,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 252,
      "_innerRule": RuleBracketsToZip {
        "__astId": 250,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 249,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 248,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 251,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 245,
                    "_cellModifiers": Set {
                      "PERPENDICULAR",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 244,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 243,
                          "_color": TransparentColor {
                            "__astId": 242,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 247,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 246,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 245,
                    "_cellModifiers": Set {
                      "PERPENDICULAR",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 244,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 243,
                          "_color": TransparentColor {
                            "__astId": 242,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 29`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_ORTHOGONAL",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "ORTHOGONAL",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 30`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 255,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 254,
          "_color": TransparentColor {
            "__astId": 253,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 254,
      "_color": TransparentColor {
        "__astId": 253,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 263,
      "_innerRule": RuleBracketsToZip {
        "__astId": 261,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 260,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 259,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 262,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 256,
                    "_cellModifiers": Set {
                      "ORTHOGONAL",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 255,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 254,
                          "_color": TransparentColor {
                            "__astId": 253,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 258,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 257,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 256,
                    "_cellModifiers": Set {
                      "ORTHOGONAL",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 255,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 254,
                          "_color": TransparentColor {
                            "__astId": 253,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 31`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_RANDOMDIR",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "RANDOMDIR",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with directions 32`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 266,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 265,
          "_color": TransparentColor {
            "__astId": 264,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 265,
      "_color": TransparentColor {
        "__astId": 264,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 274,
      "_innerRule": RuleBracketsToZip {
        "__astId": 272,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 271,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 270,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 273,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 267,
                    "_cellModifiers": Set {
                      "RANDOMDIR",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 266,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 265,
                          "_color": TransparentColor {
                            "__astId": 264,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 269,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 268,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 267,
                    "_cellModifiers": Set {
                      "RANDOMDIR",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 266,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 265,
                          "_color": TransparentColor {
                            "__astId": 264,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with modifiers 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_NO",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "NO",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with modifiers 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 277,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 276,
          "_color": TransparentColor {
            "__astId": 275,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 276,
      "_color": TransparentColor {
        "__astId": 275,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 285,
      "_innerRule": RuleBracketsToZip {
        "__astId": 283,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 282,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 281,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 284,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 278,
                    "_cellModifiers": Set {
                      "NO",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 277,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 276,
                          "_color": TransparentColor {
                            "__astId": 275,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 280,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 279,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 278,
                    "_cellModifiers": Set {
                      "NO",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 277,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 276,
                          "_color": TransparentColor {
                            "__astId": 275,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Cell Modifiers parses a rule with modifiers 2 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i0": Array [
                                        Object {
                                          "__name": "cellLayerModifier",
                                          "_i1": Object {
                                            "__name": "cellLayerModifierInner",
                                            "_i0": Object {
                                              "__name": "t_STATIONARY",
                                              "_i0": Object {
                                                "__name": "caseInsensitive",
                                                "_i0": "STATIONARY",
                                              },
                                            },
                                          },
                                          "_i2": Array [
                                            Object {
                                              "__name": "space",
                                              "_i0": Object {
                                                "__name": "whitespace",
                                                "_i0": " ",
                                              },
                                            },
                                          ],
                                        },
                                      ],
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Cell Modifiers parses a rule with modifiers 2 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 300,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 299,
          "_color": TransparentColor {
            "__astId": 298,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 299,
      "_color": TransparentColor {
        "__astId": 298,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 309,
      "_innerRule": RuleBracketsToZip {
        "__astId": 307,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 306,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 305,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 304,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 300,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 299,
                          "_color": TransparentColor {
                            "__astId": 298,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 308,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 304,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 300,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 299,
                          "_color": TransparentColor {
                            "__astId": 298,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 301,
                    "_cellModifiers": Set {
                      "STATIONARY",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 300,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 299,
                          "_color": TransparentColor {
                            "__astId": 298,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 303,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 302,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 301,
                    "_cellModifiers": Set {
                      "STATIONARY",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 300,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 299,
                          "_color": TransparentColor {
                            "__astId": 298,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Commands parses a rule with a command inside the brackets (these should be moved up to the Action Commands) 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "HackCellLayer1",
                                    "_i0": Object {
                                      "__name": "HackRuleCommand",
                                      "_i0": Object {
                                        "__name": "RuleCommand",
                                        "_i0": Object {
                                          "__name": "t_SFX",
                                          "_i0": Object {
                                            "__name": "t_SFX0",
                                            "_i0": Object {
                                              "__name": "caseInsensitive",
                                              "_i0": "SFX0",
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Commands parses a rule with a command inside the brackets (these should be moved up to the Action Commands) 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 312,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 311,
          "_color": TransparentColor {
            "__astId": 310,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 311,
      "_color": TransparentColor {
        "__astId": 310,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 321,
      "_innerRule": RuleBracketsToZip {
        "__astId": 319,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 318,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 317,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayerHack {
                    "__astId": 316,
                    "_hackRuleCommand": "SFX0",
                    "_spriteNameMaybeNull": null,
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 320,
                "actionLayers": Array [
                  GameRuleCellLayerHack {
                    "__astId": 316,
                    "_hackRuleCommand": "SFX0",
                    "_spriteNameMaybeNull": null,
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 313,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 312,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 311,
                          "_color": TransparentColor {
                            "__astId": 310,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 315,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 314,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 313,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 312,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 311,
                          "_color": TransparentColor {
                            "__astId": 310,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Commands parses a rule with a command inside the brackets (these should be moved up to the Action Commands) 3`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "HackCellLayer2",
                                    "_i0": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                    "_i1": Object {
                                      "__name": "HackRuleCommand",
                                      "_i0": Object {
                                        "__name": "RuleCommand",
                                        "_i0": Object {
                                          "__name": "t_SFX",
                                          "_i0": Object {
                                            "__name": "t_SFX1",
                                            "_i0": Object {
                                              "__name": "caseInsensitive",
                                              "_i0": "SFX1",
                                            },
                                          },
                                        },
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Commands parses a rule with a command inside the brackets (these should be moved up to the Action Commands) 4`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 324,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 323,
          "_color": TransparentColor {
            "__astId": 322,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 323,
      "_color": TransparentColor {
        "__astId": 322,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 333,
      "_innerRule": RuleBracketsToZip {
        "__astId": 331,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 330,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 329,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayerHack {
                    "__astId": 328,
                    "_hackRuleCommand": "SFX1",
                    "_spriteNameMaybeNull": GameLegendTileSimple {
                      "__astId": 324,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 323,
                          "_color": TransparentColor {
                            "__astId": 322,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 332,
                "actionLayers": Array [
                  GameRuleCellLayerHack {
                    "__astId": 328,
                    "_hackRuleCommand": "SFX1",
                    "_spriteNameMaybeNull": GameLegendTileSimple {
                      "__astId": 324,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 323,
                          "_color": TransparentColor {
                            "__astId": 322,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 325,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 324,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 323,
                          "_color": TransparentColor {
                            "__astId": 322,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 327,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 326,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 325,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 324,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 323,
                          "_color": TransparentColor {
                            "__astId": 322,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Commands parses a rule with a command inside the brackets (these should be moved up to the Action Commands) 5`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "w",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "i",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "n",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "t",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "e",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "r",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules Commands parses a rule with a command inside the brackets (these should be moved up to the Action Commands) 6`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 336,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 335,
          "_color": TransparentColor {
            "__astId": 334,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 337,
      "_spriteNameOrLevelChar": "winter",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 335,
          "_color": TransparentColor {
            "__astId": 334,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 335,
      "_color": TransparentColor {
        "__astId": 334,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 347,
      "_innerRule": RuleBracketsToZip {
        "__astId": 345,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 344,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 343,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 341,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 336,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 335,
                          "_color": TransparentColor {
                            "__astId": 334,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                  GameRuleCellLayer {
                    "__astId": 342,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 337,
                      "_spriteNameOrLevelChar": "winter",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 335,
                          "_color": TransparentColor {
                            "__astId": 334,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 346,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 341,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 336,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 335,
                          "_color": TransparentColor {
                            "__astId": 334,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                  GameRuleCellLayer {
                    "__astId": 342,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 337,
                      "_spriteNameOrLevelChar": "winter",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 335,
                          "_color": TransparentColor {
                            "__astId": 334,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 338,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 336,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 335,
                          "_color": TransparentColor {
                            "__astId": 334,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 340,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 339,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 338,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 336,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 335,
                          "_color": TransparentColor {
                            "__astId": 334,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules Converts an invalid color to a Transparent one 1`] = `
GameData {
  "collisionLayers": Array [
    CollisionLayer {
      "__astId": 410,
      "_sprites": Array [
        GameSpriteSingleColor {
          "__astId": 409,
          "_collisionLayer": [Circular],
          "_color": TransparentColor {
            "__astId": 408,
          },
          "_name": "player",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "legends": Array [],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 409,
      "_collisionLayer": CollisionLayer {
        "__astId": 410,
        "_sprites": Array [
          [Circular],
        ],
      },
      "_color": TransparentColor {
        "__astId": 408,
      },
      "_name": "player",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules General Formatting Correctly parses weird variable names 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "foo",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i6": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_LEGEND",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "LEGEND",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "LegendTile",
          "_i0": Object {
            "__name": "LegendTileSimple",
            "_i0": Object {
              "__name": "LegendVarNameDefn",
              "_i0": Object {
                "__name": "ruleVariableName",
                "_i0": Array [
                  Object {
                    "__name": "ruleVariableChar",
                    "_i0": Object {
                      "__name": "any",
                      "_i0": "B",
                    },
                  },
                  Object {
                    "__name": "ruleVariableChar",
                    "_i0": Object {
                      "__name": "any",
                      "_i0": "u",
                    },
                  },
                  Object {
                    "__name": "ruleVariableChar",
                    "_i0": Object {
                      "__name": "any",
                      "_i0": "s",
                    },
                  },
                  Object {
                    "__name": "ruleVariableChar",
                    "_i0": Object {
                      "__name": "any",
                      "_i0": "h",
                    },
                  },
                  Object {
                    "__name": "ruleVariableChar",
                    "_i0": Object {
                      "__name": "any",
                      "_i0": "?",
                    },
                  },
                ],
              },
            },
            "_i1": "=",
            "_i2": Object {
              "__name": "LookupLegendVarName",
              "_i0": Object {
                "__name": "LegendVarNameDefn",
                "_i0": Object {
                  "__name": "ruleVariableName",
                  "_i0": Array [
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "P",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "l",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "a",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "y",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "e",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "r",
                      },
                    },
                  ],
                },
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
        Object {
          "__name": "LegendTile",
          "_i0": Object {
            "__name": "LegendTileSimple",
            "_i0": Object {
              "__name": "LegendVarNameDefn",
              "_i0": Object {
                "__name": "ruleVariableName",
                "_i0": Array [
                  Object {
                    "__name": "ruleVariableChar",
                    "_i0": Object {
                      "__name": "any",
                      "_i0": ".",
                    },
                  },
                ],
              },
            },
            "_i1": "=",
            "_i2": Object {
              "__name": "LookupLegendVarName",
              "_i0": Object {
                "__name": "LegendVarNameDefn",
                "_i0": Object {
                  "__name": "ruleVariableName",
                  "_i0": Array [
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "P",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "l",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "a",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "y",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "e",
                      },
                    },
                    Object {
                      "__name": "ruleVariableChar",
                      "_i0": Object {
                        "__name": "any",
                        "_i0": "r",
                      },
                    },
                  ],
                },
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
        "_i0": Array [
          "=",
        ],
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
        "_i0": Array [
          "=",
        ],
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "B",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "u",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "s",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "h",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "?",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "B",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "u",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "s",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "h",
                                            },
                                          },
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "?",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": ".",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": ".",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules General Formatting Looks up color palettes using a string or an index 1`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 349,
      "_color": HexColor {
        "__astId": 348,
        "_color": RGB {
          "b": 111,
          "g": 186,
          "r": 192,
        },
        "_colorName": "#C0BA6F",
      },
      "_name": "player",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [],
  "settings": GameSettings {
    "color_palette": "gameboycolour",
  },
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules General Formatting Looks up color palettes using a string or an index 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 351,
      "_color": HexColor {
        "__astId": 350,
        "_color": RGB {
          "b": 111,
          "g": 186,
          "r": 192,
        },
        "_colorName": "#C0BA6F",
      },
      "_name": "player",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [],
  "settings": GameSettings {
    "color_palette": "2",
  },
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules General Formatting Supports characters that would be invalid in one scope but are valid in another scope 1`] = `
GameData {
  "collisionLayers": Array [
    CollisionLayer {
      "__astId": 362,
      "_sprites": Array [
        GameSpriteSingleColor {
          "__astId": 353,
          "_collisionLayer": [Circular],
          "_color": TransparentColor {
            "__astId": 352,
          },
          "_name": "hello",
          "_optionalLegendChar": ".",
        },
        GameSpriteSingleColor {
          "__astId": 355,
          "_collisionLayer": [Circular],
          "_color": TransparentColor {
            "__astId": 354,
          },
          "_name": "hello2",
          "_optionalLegendChar": "]",
        },
      ],
    },
  ],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 358,
      "_spriteNameOrLevelChar": "[",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 353,
          "_collisionLayer": CollisionLayer {
            "__astId": 362,
            "_sprites": Array [
              [Circular],
              GameSpriteSingleColor {
                "__astId": 355,
                "_collisionLayer": [Circular],
                "_color": TransparentColor {
                  "__astId": 354,
                },
                "_name": "hello2",
                "_optionalLegendChar": "]",
              },
            ],
          },
          "_color": TransparentColor {
            "__astId": 352,
          },
          "_name": "hello",
          "_optionalLegendChar": ".",
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 359,
      "_spriteNameOrLevelChar": ",",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 355,
          "_collisionLayer": CollisionLayer {
            "__astId": 362,
            "_sprites": Array [
              GameSpriteSingleColor {
                "__astId": 353,
                "_collisionLayer": [Circular],
                "_color": TransparentColor {
                  "__astId": 352,
                },
                "_name": "hello",
                "_optionalLegendChar": ".",
              },
              [Circular],
            ],
          },
          "_color": TransparentColor {
            "__astId": 354,
          },
          "_name": "hello2",
          "_optionalLegendChar": "]",
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 360,
      "_spriteNameOrLevelChar": "д",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 357,
          "_color": TransparentColor {
            "__astId": 356,
          },
          "_name": "hello3",
          "_optionalLegendChar": "♡",
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 361,
      "_spriteNameOrLevelChar": "sfx11",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 357,
          "_color": TransparentColor {
            "__astId": 356,
          },
          "_name": "hello3",
          "_optionalLegendChar": "♡",
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 353,
      "_collisionLayer": CollisionLayer {
        "__astId": 362,
        "_sprites": Array [
          [Circular],
          GameSpriteSingleColor {
            "__astId": 355,
            "_collisionLayer": [Circular],
            "_color": TransparentColor {
              "__astId": 354,
            },
            "_name": "hello2",
            "_optionalLegendChar": "]",
          },
        ],
      },
      "_color": TransparentColor {
        "__astId": 352,
      },
      "_name": "hello",
      "_optionalLegendChar": ".",
    },
    GameSpriteSingleColor {
      "__astId": 355,
      "_collisionLayer": CollisionLayer {
        "__astId": 362,
        "_sprites": Array [
          GameSpriteSingleColor {
            "__astId": 353,
            "_collisionLayer": [Circular],
            "_color": TransparentColor {
              "__astId": 352,
            },
            "_name": "hello",
            "_optionalLegendChar": ".",
          },
          [Circular],
        ],
      },
      "_color": TransparentColor {
        "__astId": 354,
      },
      "_name": "hello2",
      "_optionalLegendChar": "]",
    },
    GameSpriteSingleColor {
      "__astId": 357,
      "_color": TransparentColor {
        "__astId": 356,
      },
      "_name": "hello3",
      "_optionalLegendChar": "♡",
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 371,
      "_innerRule": RuleBracketsToZip {
        "__astId": 369,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 368,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 367,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 366,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 353,
                      "_collisionLayer": CollisionLayer {
                        "__astId": 362,
                        "_sprites": Array [
                          [Circular],
                          GameSpriteSingleColor {
                            "__astId": 355,
                            "_collisionLayer": [Circular],
                            "_color": TransparentColor {
                              "__astId": 354,
                            },
                            "_name": "hello2",
                            "_optionalLegendChar": "]",
                          },
                        ],
                      },
                      "_color": TransparentColor {
                        "__astId": 352,
                      },
                      "_name": "hello",
                      "_optionalLegendChar": ".",
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 370,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 366,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 353,
                      "_collisionLayer": CollisionLayer {
                        "__astId": 362,
                        "_sprites": Array [
                          [Circular],
                          GameSpriteSingleColor {
                            "__astId": 355,
                            "_collisionLayer": [Circular],
                            "_color": TransparentColor {
                              "__astId": 354,
                            },
                            "_name": "hello2",
                            "_optionalLegendChar": "]",
                          },
                        ],
                      },
                      "_color": TransparentColor {
                        "__astId": 352,
                      },
                      "_name": "hello",
                      "_optionalLegendChar": ".",
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 363,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 353,
                      "_collisionLayer": CollisionLayer {
                        "__astId": 362,
                        "_sprites": Array [
                          [Circular],
                          GameSpriteSingleColor {
                            "__astId": 355,
                            "_collisionLayer": [Circular],
                            "_color": TransparentColor {
                              "__astId": 354,
                            },
                            "_name": "hello2",
                            "_optionalLegendChar": "]",
                          },
                        ],
                      },
                      "_color": TransparentColor {
                        "__astId": 352,
                      },
                      "_name": "hello",
                      "_optionalLegendChar": ".",
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 365,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 364,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 363,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 353,
                      "_collisionLayer": CollisionLayer {
                        "__astId": 362,
                        "_sprites": Array [
                          [Circular],
                          GameSpriteSingleColor {
                            "__astId": 355,
                            "_collisionLayer": [Circular],
                            "_color": TransparentColor {
                              "__astId": 354,
                            },
                            "_name": "hello2",
                            "_optionalLegendChar": "]",
                          },
                        ],
                      },
                      "_color": TransparentColor {
                        "__astId": 352,
                      },
                      "_name": "hello",
                      "_optionalLegendChar": ".",
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
    GameRule {
      "__astId": 380,
      "_innerRule": RuleBracketsToZip {
        "__astId": 378,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 377,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 376,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 375,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 357,
                      "_color": TransparentColor {
                        "__astId": 356,
                      },
                      "_name": "hello3",
                      "_optionalLegendChar": "♡",
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 379,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 375,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 357,
                      "_color": TransparentColor {
                        "__astId": 356,
                      },
                      "_name": "hello3",
                      "_optionalLegendChar": "♡",
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 372,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 357,
                      "_color": TransparentColor {
                        "__astId": 356,
                      },
                      "_name": "hello3",
                      "_optionalLegendChar": "♡",
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 374,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 373,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 372,
                    "_cellModifiers": Set {},
                    "_tile": GameSpriteSingleColor {
                      "__astId": 357,
                      "_color": TransparentColor {
                        "__astId": 356,
                      },
                      "_name": "hello3",
                      "_optionalLegendChar": "♡",
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules General Formatting Supports objects named using only numbers (mirror-isles) 1`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [],
  "levels": Array [],
  "objects": Array [
    GameSpritePixels {
      "__astId": 384,
      "_colors": Array [
        HexColor {
          "__astId": 381,
          "_color": RGB {
            "b": 107,
            "g": 226,
            "r": 247,
          },
          "_colorName": "#f7e26b",
        },
        HexColor {
          "__astId": 382,
          "_color": RGB {
            "b": 51,
            "g": 38,
            "r": 190,
          },
          "_colorName": "#be2633",
        },
        HexColor {
          "__astId": 383,
          "_color": RGB {
            "b": 255,
            "g": 255,
            "r": 255,
          },
          "_colorName": "#FFFFFF",
        },
      ],
      "_name": "Table",
      "_optionalLegendChar": undefined,
      "_pixels": Array [
        Array [
          TransparentColor {
            "__astId": 385,
          },
          TransparentColor {
            "__astId": 386,
          },
          TransparentColor {
            "__astId": 387,
          },
          TransparentColor {
            "__astId": 388,
          },
          TransparentColor {
            "__astId": 389,
          },
        ],
        Array [
          TransparentColor {
            "__astId": 390,
          },
          HexColor {
            "__astId": 382,
            "_color": RGB {
              "b": 51,
              "g": 38,
              "r": 190,
            },
            "_colorName": "#be2633",
          },
          HexColor {
            "__astId": 383,
            "_color": RGB {
              "b": 255,
              "g": 255,
              "r": 255,
            },
            "_colorName": "#FFFFFF",
          },
          HexColor {
            "__astId": 382,
            "_color": RGB {
              "b": 51,
              "g": 38,
              "r": 190,
            },
            "_colorName": "#be2633",
          },
          TransparentColor {
            "__astId": 391,
          },
        ],
        Array [
          TransparentColor {
            "__astId": 392,
          },
          HexColor {
            "__astId": 383,
            "_color": RGB {
              "b": 255,
              "g": 255,
              "r": 255,
            },
            "_colorName": "#FFFFFF",
          },
          HexColor {
            "__astId": 382,
            "_color": RGB {
              "b": 51,
              "g": 38,
              "r": 190,
            },
            "_colorName": "#be2633",
          },
          HexColor {
            "__astId": 383,
            "_color": RGB {
              "b": 255,
              "g": 255,
              "r": 255,
            },
            "_colorName": "#FFFFFF",
          },
          TransparentColor {
            "__astId": 393,
          },
        ],
        Array [
          TransparentColor {
            "__astId": 394,
          },
          HexColor {
            "__astId": 382,
            "_color": RGB {
              "b": 51,
              "g": 38,
              "r": 190,
            },
            "_colorName": "#be2633",
          },
          HexColor {
            "__astId": 383,
            "_color": RGB {
              "b": 255,
              "g": 255,
              "r": 255,
            },
            "_colorName": "#FFFFFF",
          },
          HexColor {
            "__astId": 382,
            "_color": RGB {
              "b": 51,
              "g": 38,
              "r": 190,
            },
            "_colorName": "#be2633",
          },
          TransparentColor {
            "__astId": 395,
          },
        ],
        Array [
          TransparentColor {
            "__astId": 396,
          },
          HexColor {
            "__astId": 381,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          TransparentColor {
            "__astId": 397,
          },
          HexColor {
            "__astId": 381,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          TransparentColor {
            "__astId": 398,
          },
        ],
      ],
    },
    GameSpriteSingleColor {
      "__astId": 401,
      "_color": HexColor {
        "__astId": 399,
        "_color": RGB {
          "b": 107,
          "g": 226,
          "r": 247,
        },
        "_colorName": "#f7e26b",
      },
      "_name": "ChairRightLoose",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules General Formatting Supports objects named using only numbers (mirror-isles) 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [],
  "levels": Array [],
  "objects": Array [
    GameSpritePixels {
      "__astId": 403,
      "_colors": Array [
        HexColor {
          "__astId": 402,
          "_color": RGB {
            "b": 107,
            "g": 226,
            "r": 247,
          },
          "_colorName": "#f7e26b",
        },
      ],
      "_name": "player",
      "_optionalLegendChar": undefined,
      "_pixels": Array [
        Array [
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
        ],
        Array [
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
        ],
        Array [
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
        ],
        Array [
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
        ],
        Array [
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
          HexColor {
            "__astId": 402,
            "_color": RGB {
              "b": 107,
              "g": 226,
              "r": 247,
            },
            "_colorName": "#f7e26b",
          },
        ],
      ],
    },
    GameSpriteSingleColor {
      "__astId": 405,
      "_color": HexColor {
        "__astId": 404,
        "_color": RGB {
          "b": 107,
          "g": 226,
          "r": 247,
        },
        "_colorName": "#f7e26b",
      },
      "_name": "00",
      "_optionalLegendChar": undefined,
    },
    GameSpriteSingleColor {
      "__astId": 407,
      "_color": HexColor {
        "__astId": 406,
        "_color": RGB {
          "b": 107,
          "g": 226,
          "r": 247,
        },
        "_colorName": "#f7e26b",
      },
      "_name": "01",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules Sets the collision layer for nested sprites 1`] = `
GameData {
  "collisionLayers": Array [
    CollisionLayer {
      "__astId": 415,
      "_sprites": Array [
        GameLegendTileSimple {
          "__astId": 414,
          "_collisionLayer": [Circular],
          "_spriteNameOrLevelChar": "y",
          "_tiles": Array [
            GameLegendTileSimple {
              "__astId": 413,
              "_collisionLayer": [Circular],
              "_spriteNameOrLevelChar": "x",
              "_tiles": Array [
                GameSpriteSingleColor {
                  "__astId": 412,
                  "_collisionLayer": [Circular],
                  "_color": TransparentColor {
                    "__astId": 411,
                  },
                  "_name": "player",
                  "_optionalLegendChar": undefined,
                },
              ],
            },
          ],
        },
      ],
    },
  ],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 413,
      "_collisionLayer": CollisionLayer {
        "__astId": 415,
        "_sprites": Array [
          GameLegendTileSimple {
            "__astId": 414,
            "_collisionLayer": [Circular],
            "_spriteNameOrLevelChar": "y",
            "_tiles": Array [
              [Circular],
            ],
          },
        ],
      },
      "_spriteNameOrLevelChar": "x",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 412,
          "_collisionLayer": CollisionLayer {
            "__astId": 415,
            "_sprites": Array [
              GameLegendTileSimple {
                "__astId": 414,
                "_collisionLayer": [Circular],
                "_spriteNameOrLevelChar": "y",
                "_tiles": Array [
                  [Circular],
                ],
              },
            ],
          },
          "_color": TransparentColor {
            "__astId": 411,
          },
          "_name": "player",
          "_optionalLegendChar": undefined,
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 414,
      "_collisionLayer": CollisionLayer {
        "__astId": 415,
        "_sprites": Array [
          [Circular],
        ],
      },
      "_spriteNameOrLevelChar": "y",
      "_tiles": Array [
        GameLegendTileSimple {
          "__astId": 413,
          "_collisionLayer": CollisionLayer {
            "__astId": 415,
            "_sprites": Array [
              [Circular],
            ],
          },
          "_spriteNameOrLevelChar": "x",
          "_tiles": Array [
            GameSpriteSingleColor {
              "__astId": 412,
              "_collisionLayer": CollisionLayer {
                "__astId": 415,
                "_sprites": Array [
                  [Circular],
                ],
              },
              "_color": TransparentColor {
                "__astId": 411,
              },
              "_name": "player",
              "_optionalLegendChar": undefined,
            },
          ],
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 412,
      "_collisionLayer": CollisionLayer {
        "__astId": 415,
        "_sprites": Array [
          GameLegendTileSimple {
            "__astId": 414,
            "_collisionLayer": [Circular],
            "_spriteNameOrLevelChar": "y",
            "_tiles": Array [
              GameLegendTileSimple {
                "__astId": 413,
                "_collisionLayer": [Circular],
                "_spriteNameOrLevelChar": "x",
                "_tiles": Array [
                  [Circular],
                ],
              },
            ],
          },
        ],
      },
      "_color": TransparentColor {
        "__astId": 411,
      },
      "_name": "player",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "foo",
  "winConditions": Array [],
}
`;

exports[`rules parses a rule with a _ for a variable name 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "_",
                                              },
                                            },
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "x",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a rule with a _ for a variable name 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 90,
      "_spriteNameOrLevelChar": "z_x",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 89,
          "_color": TransparentColor {
            "__astId": 88,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 89,
      "_color": TransparentColor {
        "__astId": 88,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 98,
      "_innerRule": RuleBracketsToZip {
        "__astId": 96,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 95,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 94,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 97,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 91,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 90,
                      "_spriteNameOrLevelChar": "z_x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 89,
                          "_color": TransparentColor {
                            "__astId": 88,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 93,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 92,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 91,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 90,
                      "_spriteNameOrLevelChar": "z_x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 89,
                          "_color": TransparentColor {
                            "__astId": 88,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a rule with a period for a variable name 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": ".",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a rule with a period for a variable name 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 79,
      "_spriteNameOrLevelChar": ".",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 78,
          "_color": TransparentColor {
            "__astId": 77,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 78,
      "_color": TransparentColor {
        "__astId": 77,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 87,
      "_innerRule": RuleBracketsToZip {
        "__astId": 85,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 84,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 83,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 86,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 80,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 79,
                      "_spriteNameOrLevelChar": ".",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 78,
                          "_color": TransparentColor {
                            "__astId": 77,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 82,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 81,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 80,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 79,
                      "_spriteNameOrLevelChar": ".",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 78,
                          "_color": TransparentColor {
                            "__astId": 77,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a rule with ellpisis 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "EllipsisBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                              "_i1": Array [
                                "|",
                              ],
                              "_i2": Array [
                                Object {
                                  "__name": "Cell",
                                },
                              ],
                            },
                          },
                          "_i3": Object {
                            "__name": "t_ELLIPSIS",
                            "_i0": "...",
                          },
                          "_i4": "|",
                          "_i5": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "x",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                              "_i1": Array [
                                "|",
                              ],
                              "_i2": Array [
                                Object {
                                  "__name": "Cell",
                                  "_i0": Array [
                                    Object {
                                      "__name": "CellLayer",
                                      "_i0": Object {
                                        "__name": "SimpleCellLayer",
                                        "_i1": Object {
                                          "__name": "cellName",
                                          "_i0": Object {
                                            "__name": "ruleVariableName",
                                            "_i0": Array [
                                              Object {
                                                "__name": "ruleVariableChar",
                                                "_i0": Object {
                                                  "__name": "any",
                                                  "_i0": "z",
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              ],
                            },
                          },
                          "_i6": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "EllipsisBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i0": Array [
                                      Object {
                                        "__name": "cellLayerModifier",
                                        "_i1": Object {
                                          "__name": "cellLayerModifierInner",
                                          "_i0": Object {
                                            "__name": "t_RANDOM",
                                            "_i0": Object {
                                              "__name": "caseInsensitive",
                                              "_i0": "RANDOM",
                                            },
                                          },
                                        },
                                        "_i2": Array [
                                          Object {
                                            "__name": "space",
                                            "_i0": Object {
                                              "__name": "whitespace",
                                              "_i0": " ",
                                            },
                                          },
                                        ],
                                      },
                                    ],
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "_i1": Array [
                              "|",
                            ],
                            "_i2": Array [
                              Object {
                                "__name": "Cell",
                              },
                            ],
                          },
                        },
                        "_i3": Object {
                          "__name": "t_ELLIPSIS",
                          "_i0": "...",
                        },
                        "_i4": "|",
                        "_i5": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "x",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "_i1": Array [
                              "|",
                            ],
                            "_i2": Array [
                              Object {
                                "__name": "Cell",
                              },
                            ],
                          },
                        },
                        "_i6": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a rule with ellpisis 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 64,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 63,
          "_color": TransparentColor {
            "__astId": 62,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 65,
      "_spriteNameOrLevelChar": "x",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 63,
          "_color": TransparentColor {
            "__astId": 62,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 63,
      "_color": TransparentColor {
        "__astId": 62,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 76,
      "_innerRule": RuleBracketsToZip {
        "__astId": 75,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 74,
            "_bracket": RuleEllipsisBracket {
              "__astId": 73,
              "_leftNeighboringCells": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 71,
                    "_cellModifiers": Set {
                      "RANDOM",
                    },
                    "_tile": GameLegendTileSimple {
                      "__astId": 64,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 63,
                          "_color": TransparentColor {
                            "__astId": 62,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                Array [],
              ],
              "_rightNeighboringCells": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 72,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 65,
                      "_spriteNameOrLevelChar": "x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 63,
                          "_color": TransparentColor {
                            "__astId": 62,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          EllipsisPair {},
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 70,
            "_bracket": RuleEllipsisBracket {
              "__astId": 69,
              "_leftNeighboringCells": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 66,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 64,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 63,
                          "_color": TransparentColor {
                            "__astId": 62,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                Array [],
              ],
              "_rightNeighboringCells": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 67,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 65,
                      "_spriteNameOrLevelChar": "x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 63,
                          "_color": TransparentColor {
                            "__astId": 62,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                Array [
                  GameRuleCellLayer {
                    "__astId": 68,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 64,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 63,
                          "_color": TransparentColor {
                            "__astId": 62,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a rule with multiple cells 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                              "_i1": Array [
                                "|",
                              ],
                              "_i2": Array [
                                Object {
                                  "__name": "Cell",
                                  "_i0": Array [
                                    Object {
                                      "__name": "CellLayer",
                                      "_i0": Object {
                                        "__name": "SimpleCellLayer",
                                        "_i1": Object {
                                          "__name": "cellName",
                                          "_i0": Object {
                                            "__name": "ruleVariableName",
                                            "_i0": Array [
                                              Object {
                                                "__name": "ruleVariableChar",
                                                "_i0": Object {
                                                  "__name": "any",
                                                  "_i0": "x",
                                                },
                                              },
                                            ],
                                          },
                                        },
                                      },
                                    },
                                  ],
                                },
                              ],
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                            "_i1": Array [
                              "|",
                            ],
                            "_i2": Array [
                              Object {
                                "__name": "Cell",
                              },
                            ],
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a rule with multiple cells 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 37,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 36,
          "_color": TransparentColor {
            "__astId": 35,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 38,
      "_spriteNameOrLevelChar": "x",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 36,
          "_color": TransparentColor {
            "__astId": 35,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 36,
      "_color": TransparentColor {
        "__astId": 35,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 48,
      "_innerRule": RuleBracketsToZip {
        "__astId": 45,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 44,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 43,
              "_neighbors": Array [
                Array [],
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 46,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 39,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 37,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 36,
                          "_color": TransparentColor {
                            "__astId": 35,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
              CellPair {
                "__astId": 47,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 40,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 38,
                      "_spriteNameOrLevelChar": "x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 36,
                          "_color": TransparentColor {
                            "__astId": 35,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 42,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 41,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 39,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 37,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 36,
                          "_color": TransparentColor {
                            "__astId": 35,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                Array [
                  GameRuleCellLayer {
                    "__astId": 40,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 38,
                      "_spriteNameOrLevelChar": "x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 36,
                          "_color": TransparentColor {
                            "__astId": 35,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a rule with multiple layers 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "x",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a rule with multiple layers 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 51,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 50,
          "_color": TransparentColor {
            "__astId": 49,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
    GameLegendTileSimple {
      "__astId": 52,
      "_spriteNameOrLevelChar": "x",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 50,
          "_color": TransparentColor {
            "__astId": 49,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 50,
      "_color": TransparentColor {
        "__astId": 49,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 61,
      "_innerRule": RuleBracketsToZip {
        "__astId": 59,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 58,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 57,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 60,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 53,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 51,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 50,
                          "_color": TransparentColor {
                            "__astId": 49,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                  GameRuleCellLayer {
                    "__astId": 54,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 52,
                      "_spriteNameOrLevelChar": "x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 50,
                          "_color": TransparentColor {
                            "__astId": 49,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 56,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 55,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 53,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 51,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 50,
                          "_color": TransparentColor {
                            "__astId": 49,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                  GameRuleCellLayer {
                    "__astId": 54,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 52,
                      "_spriteNameOrLevelChar": "x",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 50,
                          "_color": TransparentColor {
                            "__astId": 49,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a simple rule 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a simple rule 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 2,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 1,
          "_color": TransparentColor {
            "__astId": 0,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 1,
      "_color": TransparentColor {
        "__astId": 0,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 10,
      "_innerRule": RuleBracketsToZip {
        "__astId": 8,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 7,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 6,
              "_neighbors": Array [
                Array [],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 9,
                "actionLayers": Array [],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 3,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 2,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 1,
                          "_color": TransparentColor {
                            "__astId": 0,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 5,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 4,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 3,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 2,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 1,
                          "_color": TransparentColor {
                            "__astId": 0,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a simple rule 2 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a simple rule 2 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 13,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 12,
          "_color": TransparentColor {
            "__astId": 11,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 12,
      "_color": TransparentColor {
        "__astId": 11,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 22,
      "_innerRule": RuleBracketsToZip {
        "__astId": 20,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 19,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 18,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 17,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 13,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 12,
                          "_color": TransparentColor {
                            "__astId": 11,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 21,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 17,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 13,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 12,
                          "_color": TransparentColor {
                            "__astId": 11,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 14,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 13,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 12,
                          "_color": TransparentColor {
                            "__astId": 11,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 16,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 15,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 14,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 13,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 12,
                          "_color": TransparentColor {
                            "__astId": 11,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;

exports[`rules parses a simple rule without whitespace 1`] = `
Object {
  "__name": "GameData",
  "_i0": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i1": Object {
    "__name": "Title",
    "_i0": "title",
    "_i1": Object {
      "__name": "words",
      "_i0": Array [
        "checkGrammar",
      ],
    },
  },
  "_i2": Array [
    Object {
      "__name": "lineTerminator",
      "_i1": Object {
        "__name": "newline",
        "_i0": "
",
      },
    },
  ],
  "_i9": Array [
    Object {
      "__name": "Section",
      "_i0": "===",
      "_i1": Object {
        "__name": "headingBar",
      },
      "_i2": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i3": Object {
        "__name": "t_RULES",
        "_i0": Object {
          "__name": "caseInsensitive",
          "_i0": "RULES",
        },
      },
      "_i4": Object {
        "__name": "lineTerminator",
        "_i1": Object {
          "__name": "newline",
          "_i0": "
",
        },
      },
      "_i5": "===",
      "_i6": Object {
        "__name": "headingBar",
      },
      "_i7": Array [
        Object {
          "__name": "lineTerminator",
          "_i1": Object {
            "__name": "newline",
            "_i0": "
",
          },
        },
      ],
      "_i8": Array [
        Array [],
      ],
      "_i9": Array [
        Object {
          "__name": "RuleItem",
          "_i0": Object {
            "__name": "Rule",
            "_i2": Object {
              "__name": "RuleInner",
              "_i0": Object {
                "__name": "RuleBracketsToZip",
                "_i0": Object {
                  "__name": "RuleConditions",
                  "_i0": Array [
                    Object {
                      "__name": "CellSequenceBracket",
                      "_i1": Object {
                        "__name": "CellSequenceBracketOnly",
                        "_i0": Object {
                          "__name": "SimpleBracket",
                          "_i0": "[",
                          "_i2": Object {
                            "__name": "NeighboringCells",
                            "_i0": Object {
                              "__name": "NonemptyListOf",
                              "_i0": Object {
                                "__name": "Cell",
                                "_i0": Array [
                                  Object {
                                    "__name": "CellLayer",
                                    "_i0": Object {
                                      "__name": "SimpleCellLayer",
                                      "_i1": Object {
                                        "__name": "cellName",
                                        "_i0": Object {
                                          "__name": "ruleVariableName",
                                          "_i0": Array [
                                            Object {
                                              "__name": "ruleVariableChar",
                                              "_i0": Object {
                                                "__name": "any",
                                                "_i0": "z",
                                              },
                                            },
                                          ],
                                        },
                                      },
                                    },
                                  },
                                ],
                              },
                            },
                          },
                          "_i3": "]",
                        },
                      },
                    },
                  ],
                  "_i1": "->",
                },
                "_i1": Array [
                  Object {
                    "__name": "CellSequenceBracket",
                    "_i1": Object {
                      "__name": "CellSequenceBracketOnly",
                      "_i0": Object {
                        "__name": "SimpleBracket",
                        "_i0": "[",
                        "_i2": Object {
                          "__name": "NeighboringCells",
                          "_i0": Object {
                            "__name": "NonemptyListOf",
                            "_i0": Object {
                              "__name": "Cell",
                              "_i0": Array [
                                Object {
                                  "__name": "CellLayer",
                                  "_i0": Object {
                                    "__name": "SimpleCellLayer",
                                    "_i1": Object {
                                      "__name": "cellName",
                                      "_i0": Object {
                                        "__name": "ruleVariableName",
                                        "_i0": Array [
                                          Object {
                                            "__name": "ruleVariableChar",
                                            "_i0": Object {
                                              "__name": "any",
                                              "_i0": "z",
                                            },
                                          },
                                        ],
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                          },
                        },
                        "_i3": "]",
                      },
                    },
                  },
                ],
              },
            },
            "_i3": Array [
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
              Object {
                "__name": "lineTerminator",
                "_i1": Object {
                  "__name": "newline",
                  "_i0": "
",
                },
              },
            ],
          },
        },
      ],
    },
  ],
}
`;

exports[`rules parses a simple rule without whitespace 2`] = `
GameData {
  "collisionLayers": Array [],
  "legends": Array [
    GameLegendTileSimple {
      "__astId": 25,
      "_spriteNameOrLevelChar": "z",
      "_tiles": Array [
        GameSpriteSingleColor {
          "__astId": 24,
          "_color": TransparentColor {
            "__astId": 23,
          },
          "_name": "testObject",
          "_optionalLegendChar": undefined,
        },
      ],
    },
  ],
  "levels": Array [],
  "objects": Array [
    GameSpriteSingleColor {
      "__astId": 24,
      "_color": TransparentColor {
        "__astId": 23,
      },
      "_name": "testObject",
      "_optionalLegendChar": undefined,
    },
  ],
  "rules": Array [
    GameRule {
      "__astId": 34,
      "_innerRule": RuleBracketsToZip {
        "__astId": 32,
        "_actions": Array [
          GameRuleSequenceBracket {
            "__astId": 31,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 30,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 29,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 25,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 24,
                          "_color": TransparentColor {
                            "__astId": 23,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
        "_bracketPairs": Array [
          BracketPair {
            "neighbors": Array [
              CellPair {
                "__astId": 33,
                "actionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 29,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 25,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 24,
                          "_color": TransparentColor {
                            "__astId": 23,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
                "conditionLayers": Array [
                  GameRuleCellLayer {
                    "__astId": 26,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 25,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 24,
                          "_color": TransparentColor {
                            "__astId": 23,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
        "_commands": Array [],
        "_conditions": Array [
          GameRuleSequenceBracket {
            "__astId": 28,
            "_bracket": GameRuleSimpleBracket {
              "__astId": 27,
              "_neighbors": Array [
                Array [
                  GameRuleCellLayer {
                    "__astId": 26,
                    "_cellModifiers": Set {},
                    "_tile": GameLegendTileSimple {
                      "__astId": 25,
                      "_spriteNameOrLevelChar": "z",
                      "_tiles": Array [
                        GameSpriteSingleColor {
                          "__astId": 24,
                          "_color": TransparentColor {
                            "__astId": 23,
                          },
                          "_name": "testObject",
                          "_optionalLegendChar": undefined,
                        },
                      ],
                    },
                  },
                ],
              ],
            },
            "_ruleModifiers": Array [],
          },
        ],
      },
      "_ruleModifiers": Array [],
      "_rulePlus": undefined,
    },
  ],
  "settings": GameSettings {},
  "sounds": Array [],
  "title": "checkParseRule",
  "winConditions": Array [],
}
`;
